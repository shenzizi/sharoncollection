{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
  <meta name="viewport" content="width=device-width; initial-scale=1.0" >
	<title>Data Visual</title>
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/nicgirault/circosJS/master/dist/colorBrewer.css">
  <link rel="stylesheet" type="text/css" href="{% static 'css/datavisual.css' %}" />
</head>
<body>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.14/d3.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/1.8.0/d3-legend.js"></script>
  <script src="https://cdn.rawgit.com/nicgirault/circosJS/master/dist/circosJS.js" type="text/javascript"></script>
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.highcharts.com/modules/exporting.js"></script>
  <script src="http://code.highcharts.com/highcharts-more.js"></script>
  <script src="https://code.highcharts.com/modules/broken-axis.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<nav class="nav navbar-inverse" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span> 
                </button>
                <a class="navbar-brand" href="#" style="color:white">趣●資料</a>
            </div>
            <div class="collapse navbar-collapse navbar-right" id="myNavbar">
                <ul class="nav navbar-nav">
                    <li><a href="#viewing">政論收視率</a></li>
                    <li><a href="#viewing2">政論收視率貳</a></li>
                    <li><a href="#hotword">熱門關鍵字</a></li>
                    <li><a href="#viewing_all">節目收視率</a></li>
                </ul>
            </div>
        </div>
    </nav>

  <div class="container-fluid" style="padding:0">
    <div class="row">
      <div class="col-md-12">
        <img id="bg" src="#"/>
        <div id="circleAnimation"></div>
        <div id="narrative">
          <h2>Telling stories with DATA</h2>
          <div id="narrative_text">
            <p>Go deeper into a topic and offer a new perspective!</p>
            <p>Data visualization help you see something familiar in a completely new way.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

 

 <section id="viewing">
  <div class='container-fluid' id="part1" style="margin-top:1000px">
    <div class="row">
      <div class="col-md-12 col-xs-12 intro animation-element slide-left" style="background-color:maroon">
        <div class="paddingfordec">
          <h1>紅●政論</h1>
          <h2>想知道現在最夯的政論節目是哪些嗎?</h2>
          <h2>快來看看政論聲量多大,廣告價衝多高</h2>
          <p>請點選日期,一覽過去一周,一個月,一年榮登收視率前120名的政論節目</p>
          <p>收視率,10秒廣告價,C.P.M從潤利公司網站蒐集得來,聲量百分筆與聲量正負評筆數從搜尋引擎得來</p>
          <p><a a target="_blank" href="http://www1.xkm.com.tw/HTML/tw/hr/ht_top.asp">資料來源</a></p>
        </div>
      </div>
    </div>
    <div class="row">
        <div class="col-md-3 col-xs-12 dropdown">
          <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" id="datebutton">選擇日期
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu choosedate">
              <li id="oneweek"><a href="#1">過去一周</a></li>
              <li id="onemonth"><a href="#1">過去一個月</a></li>
              <li id="oneyear"><a href="#1">過去一年</a></li>
          </ul>
        </div>
        <div class="col-md-8 col-xs-12">
          <div class="col-md-2 col-xs-12" id="legend"></div>
          <div class="col-md-6 col-xs-12">
            <h3 id="viewingtext">潤利收視率(%)</h3>
            <div id="viewingbubble"></div>
          </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-4 col-xs-12" id="barlinechart01"><h3>10秒廣告價與C.P.M</h3></div>
        <div class="col-md-4 col-xs-12" id="piechart"><h3>聲量(%)</h3></div>
        <div class="col-md-4 col-xs-12" id="nbar"><h3>聲量正負評筆數</h3></div>
        <div class="clearfix"></div>
    </div>
  </div>
 </section>
 
 

 <section id="viewing2">
  <div class='container-fluid' id="part2">
    <div class="row">
      <div class="col-md-12 intro animation-element slide-left">
        <div class="paddingfordec">
          <h1>政論●番外</h1>
          <h2>政論收視率番外篇</h2>
          <p>照過來,看看其他收視率與C.P.M之關係,如何用其他圖表呈現</p>
          <p>圓形heap map最外圍顯示節目名稱,次圓顯示收視率,最小的圓顯示C.P.M,顏色越深,代表值越大<p>
          <p>底下的直條圖為2015/12/22-2015/12/25四天所蒐集到的各節目之收視率與C.P.M資料</p>
        </div>
      </div>
    </div>
    <div class="row">
       <div class="col-md-4 col-xs-12">
         <div class="col-md-2 col-xs-6">          
           <div id="heatmaplegend"></div>
         </div>
         <div class="col-md-2 col-xs-6">  
           <div id="heatmaplegend01"></div>
         </div>
       </div>
       <div class="col-md-8 col-xs-12">          
          <svg id="chart" style="display: block; margin: auto 0"></svg>  
       </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div id="highchart_barline" style="min-width: 300px; height: 400px; margin: 0 auto;margin-top:20px"></div>
      </div>
    </div>
  </div>
</section>

<section id="hotword">
  <div class='container-fluid' id="part3">
    <div class="row">
      <div class="col-md-12 intro animation-element slide-left" id="intro_viewing">
        <div class="paddingfordec">
          <h1>熱門●關鍵字</h1>
          <h2>還在怕自己lag,沒跟上朋友的節奏嗎?</h2>
          <h2>關鍵字一把抓,告訴你top10-top28熱門詞組</h2>
          <p>最近有什麼新消息?透過關鍵字來推敲大家關注的內容</p>
          <p>可點選top10-top28的按鈕,圓圈的大小代表關鍵字的熱門程度,看清楚了嗎?不要再lag囉!</p>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-3">
       <div>
        <button type="button" class="btn btn-primary topb" id="top10">TOP10</button>
        <button type="button" class="btn btn-primary topb" id="top15">TOP15</button>
       </div>
       <div>
        <button type="button" class="btn btn-primary topb" id="top20">TOP20</button>
        <button type="button" class="btn btn-primary topb" id="top28">TOP28</button>
       </div>
     </div>
     <!--<div class="row">-->
       <div class="col-md-9">
        <canvas id='canvas' width='1000px' height='600px'></canvas>
       </div>
     <!--</div>-->
    </div>
  </div>
 </section>

<section id="viewing_all">
  <div class='container-fluid' id="part4">
    <div class="row">
       <div class="col-md-12 intro animation-element slide-left">
        <div class="paddingfordec">
        <h1>夯●節目</h1>
        <h2>回家後就打開電視機嗎?有沒有最夯節目的八卦?</h2>
        <h2>要當個盡責的couch potato,先了解大家都沉浸在哪些節目裡</h2>
        <p></p>
        <p>泡泡圖呈現節目聲量與收視率的關係,可發現有些節目收視率高,但很少人討論</p>
        <p>而有些節目可說是人氣王,收視率高,大家在網路上也都熱切討論,如瑯琊榜</p>
        <p>泡泡圖下方表格詳列收視率前20名的節目各項資訊,包含收視率,聲量,正負評筆數,及正負評百分比</p>
        </div>        
      </div>
    </div>
     <div class="row">
       <div class="col-md-12">
         <div id="bubblechart" style="min-width: 280px; height: 500px;"></div>
       </div>
    </div>
    <div class="row">
      <div class="col-md-12" id="viewingtable_col">
         <table class="table table-striped viewingtable" style="min-width:280px;margin-top:30px">
            <thead>
              <tr>
                <th id="table_rank">排名</th>
                <th id="table_channel">頻道</th>
                <th>節目名稱</th>
                <th>收視率(%)</th>
                <th>網路聲量(%)</th>
                <th>正評數</th>
                <th>負評數</th>
                <th>正評/負評</th>
              </tr>
            </thead>
          <tbody>
          </tbody>
         </table>
      </div>
    </div>
  </div>
</section>
  <div class="container-fluid" id="footer">
    <div class="row">
      <div class="col-md-offset-5">
        <h3 id="footernote">Created by Zihyu Shen,2016</h3> 
      </div>
    </div>
  </div>

  <script src="{% static 'js/datavisual.js' %}" type="text/javascript"></script>
  <script src="{% static 'js/dv_response.js' %}"></script>
  <script src="{% static 'js/dv_canvas.js' %}"></script>
  <script src="{% static 'js/dv_data.js' %}" type="text/javascript"></script>
  <script src="{% static 'js/dv_plots_charts.js' %}" type="text/javascript"></script>

  <script>
   var bgwidth=$(window).width(), 
       bgheight=$(window).height(),
       bgratio=bgwidth/bgheight;

   function layout(){
   	console.log(bgratio);  
   	if (bgratio<1){
      $('#bg').attr("src","{% static 'img/datavisual_re_sm.jpg' %}")
   	}else{
      $('#bg').attr("src","{% static 'img/datavisual_re.jpg' %}")
   	}
   	$('#bg').css('width',bgwidth);
   	$('#bg').css('height',bgheight);
    $('#part1').css('margin-top',bgheight+70)
    if (bgwidth>767){
      $(".navbar-inverse").addClass("navbar-fixed-top")
    }else{
      $(".axis").css("fill","black")
    }
   };
   // if (bgwidth<340){

  // }
  
  $(function(){ 
     $( window ).resize(function() {
       layout();
     });    
     layout();
     scrolling();
     circlegenerator();      
     circleAnimation();
     legend();//d3 legend,use library to make legend
     viewingbubble(hardcode_viewingbubble_json_onemonth, 
     hardcode_viewingbubble_jsonvalue_onemonth);//d3,get data from data.js(hardcode_viewingbubble_json;hardcode_viewingbubble_jsonvalue )
     barlinechart01(hardcode_pie_barline_data_onemonth);//d3,get data from data.js(hardcode_pie_barline_data)  
     piechart(hardcode_pie_barline_data_onemonth);//default(data.js;hardcode_pie_barline_data)
     barchartwn(hardcode_bardata_onemonth);//default(data.js;hardcode_bardata)
     circosjs();//d3_circosjs,get data from data.js(hardcode_layout_data,hardcode_viewing,hardcode_cpm)
     highchart_barline(); //highchart_barline,get data from data.js(hardcode_viewing,hardcode_cpm,var arr=barlinechart();)
     highchart_bubble();//bubblecharts,get data from sample.json  
     viewing_clickbutton();
  });
  </script>
</body>
</html>
